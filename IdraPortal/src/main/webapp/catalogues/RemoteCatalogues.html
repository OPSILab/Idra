<!--
  Idra - Open Data Federation Platform
   Copyright (C) 2020 Engineering Ingegneria Informatica S.p.A.
   
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  at your option) any later version.
   
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.
   
  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<div style="height: 100%;">
	<ul class="breadcrumb">
		<li class="breadcrumb-item"><a href="#/metadata">Home</a></li>
		<li class="breadcrumb-item active">{{'remoteCatalogues' | translate}}</li>
	</ul>
	<div class="row">
		<div class="pull-left">
			<div class="col-sm-1 col-md-1 text-center" style="padding-left: 0px">
				<button type="button" class="btn btn-primary btn-raised btn-sm"
					ng-click="returnToCatalogues()">{{'back' | translate}}</button>
			</div>
		</div>
		<div class="col-sm-5 col-md-5 form-inline">
			<label class="control-label">{{'remoteCatalogues' | translate}}</label>
				<select ng-model="selected" ng-change="selCatalogue()" ng-options="c.catalogueName for c in displayedCollection2 track by c.URL" class="form-control">
			    </select>
		</div>
	</div>

		<div class="table-responsive" >
					<table st-table="remote_displayedCollection" st-safe-src="remote_nodes"
						class="table table-striped">
						<thead>
							<tr>
								<th st-sort="name" st-sort-default="true"
									style="width: 30%">{{'name' | translate}}</th>
								<th st-sort="country" style="width: 15%">{{'country' | translate}}</th>
								<th st-sort="nodeType" style="width: 15%">{{'type' | translate}}</th>
								<th st-sort="federationLevel" style="width: 5%">{{'level' | translate}}</th>
								<th st-sort="host" style="width: 30%">{{'host' | translate}}</th>
								<th style="width: 5%"></th>
							</tr>
							<tr>
								<th><input placeholder="{{'searchName' | translate}}" class="form-control" st-search="name" /></th>
								<th>
								<select st-search="country" class="form-control">
                    					<option value=""></option>
                    					<option ng-repeat="t in nodeCountries | orderBy:'toString()'" value="{{t}}">{{t}}</option>
                				</select>
								</th>
								<th ><select st-search="nodeType" class="form-control">
                    					<option value=""></option>
                    					<option ng-repeat="t in nodeTypes | orderBy:'toString()'" value="{{t}}">{{t}}</option>
                						</select>
                				</th>
								<th ><select st-search="federationLevel" class="form-control">
                    					<option value=""></option>
                    					<option value="LEVEL_0">0</option>
                    					<option value="LEVEL_1">1</option>
                    					<option value="LEVEL_2">2</option>
                    					<option value="LEVEL_3">3</option>
                    					<option value="LEVEL_4">4</option>
                							</select></th>
                				<th></th>
                				<th><a st-reset-search href="javascript:void(0)"
											class="btn-flat "><i
											class="mdi-content-clear"></i>
											<md-tooltip>
												{{'clearFilters' | translate}}</md-tooltip></a></th>
							</tr>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="node in remote_displayedCollection track by $index" >
								<td>{{node.name}}</td>
								<td><span ng-show="node.country!='' && node.country!=undefined" 
            							style="border-style: solid;border-width: 1px;border-color: rgba(0,0,0,0.1)" class="flag-icon " 
           								 ng-class="'flag-icon-'+node.country.toLowerCase()"></span></td>
								<td>{{node.nodeType}}</td>
								<!-- <td>{{node.federationLevel.split("_")[1]}}</td> -->
								<td>{{setLevel(node)}}</td>
								<td>{{node.host}}</td>
								<td>
									<div class="buttons">
										<a href="javascript:void(0)"
											class="btn-flat "
											a-disabled="node.alreadyLocal || ((node.nodeType=='ORION' || node.nodeType=='SPARQL' || node.nodeType=='DCATDUMP') && (selIsAuth==false))"
											ng-click="addRemoteNode(node)"> <i
											class="mdi-content-add-circle-outline"> <md-tooltip ng-show="!node.alreadyLocal">
												{{'addCatalogue' | translate}}</md-tooltip></i>
										</a>
									</div>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<div st-pagination="" st-items-by-page="itemsByPage"
										st-template="CustomPagination.html"></div>
								</td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
							</tr>
						</tfoot>
					</table>
				</div>
			</div>
			